---
layout: post
title: Model customization - long context vs RAG  
lecture: 
lectureVersion: next
extraContent: 
notes: team-2
video: team-2
tags:
- 
desc: 2025-S4
term: 2025-seminarRead
categories:
- 
---


In this session, our readings cover: 

## Required Readings: 

#### YaRN: Efficient Context Window Extension of Large Language Models
+ [Submitted on 31 Aug 2023 (v1), last revised 1 Nov 2023 (this version, v2)]
+ Bowen Peng, Jeffrey Quesnelle, Honglu Fan, Enrico Shippole
+ Rotary Position Embeddings (RoPE) have been shown to effectively encode positional information in transformer-based language models. However, these models fail to generalize past the sequence length they were trained on. We present YaRN (Yet another RoPE extensioN method), a compute-efficient method to extend the context window of such models, requiring 10x less tokens and 2.5x less training steps than previous methods. Using YaRN, we show that LLaMA models can effectively utilize and extrapolate to context lengths much longer than their original pre-training would allow, while also surpassing previous the state-of-the-art at context window extension. In addition, we demonstrate that YaRN exhibits the capability to extrapolate beyond the limited context of a fine-tuning dataset. The models fine-tuned using YaRN has been made available and reproduced online up to 128k context length at this https URL



#### Long Context vs. RAG for LLMs: An Evaluation and Revisits
+ [Submitted on 27 Dec 2024]
+ [https://arxiv.org/abs/2501.01880](https://arxiv.org/abs/2501.01880)
+ Xinze Li, Yixin Cao, Yubo Ma, Aixin Sun
+ Extending context windows (i.e., Long Context, LC) and using retrievers to selectively access relevant information (i.e., Retrieval-Augmented Generation, RAG) are the two main strategies to enable LLMs to incorporate extremely long external contexts. This paper revisits recent studies on this topic, highlighting their key insights and discrepancies. We then provide a more comprehensive evaluation by filtering out questions answerable without external context, identifying the most effective retrieval methods, and expanding the datasets. We show that LC generally outperforms RAG in question-answering benchmarks, especially for Wikipedia-based questions. Summarization-based retrieval performs comparably to LC, while chunk-based retrieval lags behind. However, RAG has advantages in dialogue-based and general question queries. These insights underscore the trade-offs between RAG and LC strategies, offering guidance for future optimization of LLMs with external knowledge sources. We also provide an in-depth discussion on this topic, highlighting the overlooked importance of context relevance in existing studies.
  

#### Leave No Context Behind: Efficient Infinite Context Transformers with Infini-attention
+ Submitted on 10 Apr 2024 (v1), last revised 9 Aug 2024 (this version, v2)]
+ Tsendsuren Munkhdalai, Manaal Faruqui, Siddharth Gopal
+ This work introduces an efficient method to scale Transformer-based Large Language Models (LLMs) to infinitely long inputs with bounded memory and computation. A key component in our proposed approach is a new attention technique dubbed Infini-attention. The Infini-attention incorporates a compressive memory into the vanilla attention mechanism and builds in both masked local attention and long-term linear attention mechanisms in a single Transformer block. We demonstrate the effectiveness of our approach on long-context language modeling benchmarks, 1M sequence length passkey context block retrieval and 500K length book summarization tasks with 1B and 8B LLMs. Our approach introduces minimal bounded memory parameters and enables fast streaming inference for LLMs.


## More Readings: 

